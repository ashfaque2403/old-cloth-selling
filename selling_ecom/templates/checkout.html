{% extends "base.html" %}
{% load static %}
{% block content %}

<br>
<br>
<br>
<br>
<br>
<br>

<div class="container">
    <form method="post" action="{% url 'start_order' %}">               
        {% csrf_token %}
            <div class="row">
                <div class="col-sm-10 col-lg-7 col-xl-10 m-lr-auto m-b-50">
                    <div class="bor10 p-lr-40 p-t-30  m-l-63 m-r-40 m-lr-0-xl p-lr-15-sm">
                        <h4 class="mtext-109 cl2 p-b-30">
                            Order Summary
                        </h4>
                        {% for cart_item in cart_items %}
                        <div class="flex-w flex-t p-t-27 p-b-33">
                            
                            

                            <div class="size-209 p-t-1">
                                <div class="media-body">
                                    <span class="stext-110 cl2">
                                        {{ cart_item.product.name }}
                                    </span>
                                    
                                    <div class="small text-muted">Price: ${{ cart_item.product.price }} | Qty: {{ cart_item.quantity }} | Subtotal: ${{ cart_item.total_price }}</div>
                                </div>
                            </div>
                            
                        </div>
                        {% endfor %}
                       
                        <a href="{% url "shoping-cart" %}"
                             class="flex-c-m stext-101 cl0 size-116 bg3 bor14 hov-btn3 p-lr-15 trans-04 pointer">
                                Back to cart
                            
                        </a>
                        
                    </div>
                </div>

            </div>


            <div class="row">
                <div class="col-sm-10 col-lg-7 col-xl-10 m-lr-auto m-b-50">
                    <div class="bor10 p-lr-40 p-t-30 p-b-40 m-l-63 m-r-40 m-lr-0-xl p-lr-15-sm">
                        <h4 class="mtext-109 cl2 p-b-30">
                            Your Order
                        </h4>

                        <div class="flex-w flex-t bor12 p-b-13">
                            <div class="size-208">
                                <span class="stext-110 cl2">
                                    Subtotal:
                                </span>
                            </div>

                            <div class="size-209">
                                <span class="mtext-110 cl2">
                                    ${{total_price}}
                                </span>
                            </div>
                        </div>
                        <div class="flex-w flex-t bor12 p-b-13">
                            <div class="size-208">
                                <span class="stext-110 cl2">
                                    Discount:
                                </span>
                            </div>

                            <div class="size-209">
                                <span class="mtext-110 cl2">
                                    ${{total_discount}}
                                </span>
                            </div>
                        </div>

                        

                        <div class="flex-w flex-t p-t-27 p-b-33">
                            <div class="size-208">
                                <span class="mtext-101 cl2">
                                    Total:
                                </span>
                            </div>

                            <div class="size-209 p-t-1">
                                <span class="mtext-110 cl2">
                                    {{total_amount}}
                                </span>
                            </div>
                        </div>
                        
                        
                    </div>
                </div>

            </div>


            <div class="row">
                <div class="col-sm-10 col-lg-7 col-xl-10 m-lr-auto m-b-50">
                    <div class="bor10 p-lr-40 p-t-30 p-b-40 m-l-63 m-r-40 m-lr-0-xl p-lr-15-sm">
                        <h4 class="mtext-109 cl2 p-b-30">
                            Billing address 
                        </h4>


                        

                        <div class="flex-w flex-t p-t-27 p-b-33">
                        
                            <div class="row">
                                <div class="col-md-6 mb-3">
                                    <label for="first_name">First name *</label>
                                    <input value="{{form_data.first_name}}" name="first_name" type="text" class="form-control" id="first_name" required>
                                </div>
                                <div class="col-md-6 mb-3">
                                    <label for="last_name">Last name *</label>
                                    <input value="{{form_data.last_name}}" name="last_name" type="text" class="form-control" id="last_name" required>
                                </div>
                                <div class="col-md-12 mb-3">
                                    <label for="email">Email Address *</label>
                                    <input value="{{form_data.email}}" type="email" class="form-control" name="email" id="email"  required>
                                </div>
                                <div class="col-md-12 mb-3">
                                    <label for="address">Address *</label>
                                    <input value="{{form_data.address}}" type="text" class="form-control" name="address" id="address" required>
                                </div>
                                <div class="col-md-12 mb-3">
                                    <label for="zip">Zip *</label>
                                    <input value="{{form_data.zipcode}}" type="text" class="form-control" name="zipcode" id="zip" required>
                                </div>
                            </div>
                        </div>
                        <a href="{% url "address" %}"
                            class="flex-c-m stext-101 cl0 size-116 bg3 bor14 hov-btn3 p-lr-15 trans-04 pointer">
                                Add/Change Address
                            
                        </a>
                        
                    </div>
                </div>

            </div>


            <div class="row">
                <div class="col-sm-10 col-lg-7 col-xl-10 m-lr-auto m-b-50">
                    <div class="bor10 p-lr-40 p-t-30 p-b-40 m-l-63 m-r-40 m-lr-0-xl p-lr-15-sm">
                        <h4 class="mtext-109 cl2 p-b-30">
                            Payment
                        </h4>

                        <div class="flex-w flex-t p-t-27 p-b-33">
                           
                            <div class="row">
                                <div class="col-md-6 mb-3">
                                    <label for="cc-name">Name on card</label>
                                    <input type="text" class="form-control" id="cc-name" placeholder="" required> <small class="text-muted">Full name as displayed on card</small>
                                    <div class="invalid-feedback"> Name on card is required </div>
                                </div>
                                <div class="col-md-6 mb-3">
                                    <label for="cc-number">Credit card number</label>
                                    <input type="text" class="form-control" id="cc-number" placeholder="" required>
                                    <div class="invalid-feedback"> Credit card number is required </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-3 mb-3">
                                    <label for="cc-expiration">Expiration</label>
                                    <input type="text" class="form-control" id="cc-expiration" placeholder="" required>
                                    <div class="invalid-feedback"> Expiration date required </div>
                                </div>
                                <div class="col-md-3 mb-3">
                                    <label for="cc-expiration">CVV</label>
                                    <input type="text" class="form-control" id="cc-cvv" placeholder="" required>
                                    <div class="invalid-feedback"> Security code required </div>
                                </div>
                                {% comment %} <div class="col-md-6 mb-3">
                                    <div class="payment-icon">
                                        <ul>
                                            <li><img class="img-fluid" src="{% static 'images/payment-icon/1.png' %}" alt=""></li>
                                            <li><img class="img-fluid" src="{% static 'images/payment-icon/2.png' %}" alt=""></li>
                                            <li><img class="img-fluid" src="{% static 'images/payment-icon/3.png' %}" alt=""></li>
                                            <li><img class="img-fluid" src="{% static 'images/payment-icon/5.png' %}" alt=""></li>
                                            <li><img class="img-fluid" src="{% static 'images/payment-icon/7.png' %}" alt=""></li>
                                        </ul>
                                    </div>
                                </div> {% endcomment %}
                            </div>
                        </div>
                        <a href="">
                            <button type="submit" class="flex-c-m stext-101 cl0 size-116 bg3 bor14 hov-btn3 p-lr-15 trans-04 pointer">
                                Payment Now
                            </button>
                        </a>
                        
                    </div>
                </div>

            </div>

          
            
                
        
    </form>         

</div>
  







{% comment %} <!-- Start Cart -->
<div class="cart-box-main">
    <div class="container">
        <form method="post" action="{% url 'start_order' %}">               
            {% csrf_token %}
            <div class="row">
                <div class="col-lg-12 mb-3">
                    <div class="shipping-method-box">
                        <h3>Shipping Method</h3>
                        <div class="mb-4">
                            <!-- Standard Delivery Option -->
                            <div class="custom-control custom-radio">
                                <input id="shippingOption1" name="shipping-option" class="custom-control-input" value="Standard Delivery" type="radio" checked="checked" onchange="updateShippingCost('free')">
                                <label class="custom-control-label" for="shippingOption1">Standard Delivery</label>
                                <span class="float-right font-weight-bold">FREE</span>
                                <div class="ml-4 mb-2 small">(3-7 business days)</div>
                            </div>
    
                            <!-- Speed Delivery Option -->
                            <div class="custom-control custom-radio">
                                <input id="shippingOption2" name="shipping-option" class="custom-control-input" value="Speed Delivery" type="radio" onchange="updateShippingCost('{{ speed_delivery }}')">
                                <label class="custom-control-label" for="shippingOption2">Speed Delivery</label>
                                <span class="float-right font-weight-bold">${{ speed_delivery }}</span>
                                <div class="ml-4 mb-2 small">(2-4 business days)</div>
                            </div>
                        </div>
                    </div>

                    <div class="order-box">
                        <h3>Shopping cart</h3>
                        <div class="rounded p-2 bg-light">
                            {% for cart_item in cart_items %}
                            <div class="media mb-2 border-bottom">
                                <div class="media-body">
                                    <a href="detail.html">{{ cart_item.product.name }}</a>
                                    <div class="small text-muted">Price: ${{ cart_item.product.price }} | Qty: {{ cart_item.quantity }} | Subtotal: ${{ cart_item.total_price }}</div>
                                </div>
                            </div>
                            {% endfor %}
                        </div>
                        <h3>Your order</h3>
                        <div class="d-flex justify-content-between">
                            <span>Sub Total</span>
                            <strong>$ {{ total_amount }}</strong>
                        </div>
                        <div class="d-flex justify-content-between">
                            <span>Discount</span>
                            <strong>$ {{ total_discount }}</strong>
                        </div>
                        
                        <div class="d-flex justify-content-between">
                            <span>Shipping Cost</span>
                            <strong id="shippingCost">Free</strong>
                        </div>
                        <div class="d-flex justify-content-between">
                            <span>Grand Total</span>
                            <strong id="totalAmount">${{ discounted_amount }}</strong>
                        </div>
                    </div>

                    <div class="checkout-address">
                        <h3>Billing address <a class="btn btn-warning" href="">Add/Change Address</a></h3>
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label for="first_name">First name *</label>
                                <input value="{{form_data.first_name}}" name="first_name" type="text" class="form-control" id="first_name" required>
                            </div>
                            <div class="col-md-6 mb-3">
                                <label for="last_name">Last name *</label>
                                <input value="{{form_data.last_name}}" name="last_name" type="text" class="form-control" id="last_name" required>
                            </div>
                            <div class="col-md-12 mb-3">
                                <label for="email">Email Address *</label>
                                <input value="{{form_data.email}}" type="email" class="form-control" name="email" id="email"  required>
                            </div>
                            <div class="col-md-12 mb-3">
                                <label for="address">Address *</label>
                                <input value="{{form_data.address}}" type="text" class="form-control" name="address" id="address" required>
                            </div>
                            <div class="col-md-12 mb-3">
                                <label for="zip">Zip *</label>
                                <input value="{{form_data.zipcode}}" type="text" class="form-control" name="zipcode" id="zip" required>
                            </div>
                        </div>
                        <div class="title"> <span>Payment</span> </div>
                            <div class="d-block my-3">
                                <div class="custom-control custom-radio">
                                    <input id="credit" name="paymentMethod" type="radio" class="custom-control-input" checked required>
                                    <label class="custom-control-label" for="credit">Credit card</label>
                                </div>
                                <div class="custom-control custom-radio">
                                    <input id="debit" name="paymentMethod" type="radio" class="custom-control-input" required>
                                    <label class="custom-control-label" for="debit">Debit card</label>
                                </div>
                                <div class="custom-control custom-radio">
                                    <input id="paypal" name="paymentMethod" type="radio" class="custom-control-input" required>
                                    <label class="custom-control-label" for="paypal">Paypal</label>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-6 mb-3">
                                    <label for="cc-name">Name on card</label>
                                    <input type="text" class="form-control" id="cc-name" placeholder="" required> <small class="text-muted">Full name as displayed on card</small>
                                    <div class="invalid-feedback"> Name on card is required </div>
                                </div>
                                <div class="col-md-6 mb-3">
                                    <label for="cc-number">Credit card number</label>
                                    <input type="text" class="form-control" id="cc-number" placeholder="" required>
                                    <div class="invalid-feedback"> Credit card number is required </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-3 mb-3">
                                    <label for="cc-expiration">Expiration</label>
                                    <input type="text" class="form-control" id="cc-expiration" placeholder="" required>
                                    <div class="invalid-feedback"> Expiration date required </div>
                                </div>
                                <div class="col-md-3 mb-3">
                                    <label for="cc-expiration">CVV</label>
                                    <input type="text" class="form-control" id="cc-cvv" placeholder="" required>
                                    <div class="invalid-feedback"> Security code required </div>
                                </div>
                                <div class="col-md-6 mb-3">
                                    <div class="payment-icon">
                                        <ul>
                                            <li><img class="img-fluid" src="{% static 'images/payment-icon/1.png' %}" alt=""></li>
                                            <li><img class="img-fluid" src="{% static 'images/payment-icon/2.png' %}" alt=""></li>
                                            <li><img class="img-fluid" src="{% static 'images/payment-icon/3.png' %}" alt=""></li>
                                            <li><img class="img-fluid" src="{% static 'images/payment-icon/5.png' %}" alt=""></li>
                                            <li><img class="img-fluid" src="{% static 'images/payment-icon/7.png' %}" alt=""></li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        <button type="submit" class="flex-c-m stext-101 cl0 size-116 bg3 bor14 hov-btn3 p-lr-15 trans-04 pointer">Payment</button>
                    </div>
                </div>
            </div>
        </form> 
    </div> 
</div>
<!-- End Cart -->

<script>
    function updateShippingCost(cost) {
        const shippingCostDisplay = document.getElementById('shippingCost');
        const totalAmountDisplay = document.getElementById('totalAmount');
        const baseAmount = parseFloat('{{ discounted_amount }}');
        let finalAmount = cost === 'free' ? baseAmount : baseAmount + parseFloat(cost);
        totalAmountDisplay.textContent = `$${finalAmount.toFixed(2)}`;
        shippingCostDisplay.textContent = cost === 'free' ? 'Free' : `$${cost}`;
    }
</script> {% endcomment %}

    {% endblock content %}